"use strict";angular.module("farmersmarketApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ngMap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("farmersmarketApp").controller("MainCtrl",["$scope","NgMap",function(a,b){a.latitude="47.610902",a.longitude="-122.336422",a.customMarkers=[],$.get("zips.txt",function(b){var c=b.split("\n");a.zipMap={},c.forEach(function(b){var c=b.split(",");"ZIP"!==c[0]&&(a.zipMap[c[0]]={latitude:c[1],longitude:c[2]})})}),a.update=function(){function b(a,b){if(b==google.maps.places.PlacesServiceStatus.OK)for(var d=0;d<a.length;d++)c(a[d])}function c(b){var c=b.geometry.location.lat(),d=b.geometry.location.lng(),e='<div id="content"><div id="siteNotice"></div><h4 id="firstHeading" class="firstHeading">'+b.name+'</h4><div id="bodyContent"><p><b>Location:</b> '+b.vicinity+"</p><p><b>Rating:</b> "+b.rating+"</p></div></div>",f=new google.maps.InfoWindow({content:e}),g=new google.maps.Marker({position:new google.maps.LatLng(c,d),icon:"images/mapmarker2.1fda77a9.png",map:a.map});g.addListener("click",function(){f.open(a.map,g)})}var d=a.zipMap[a.zip];if(d){a.latitude=d.latitude.trim(),a.longitude=d.longitude.trim();var e=new google.maps.LatLng(Number(a.latitude),Number(a.longitude)),f={location:e,radius:"20000",keyword:"farmers market",type:["food","point_of_interest","establishment"]},g=new google.maps.places.PlacesService(a.map);g.nearbySearch(f,b)}},b.getMap().then(function(b){a.map=b})}]),angular.module("farmersmarketApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("farmersmarketApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<h1> Find a Market Nearby </h1> <h4>Zip:</h4> <input type="text" ng-model="zip" ng-change="update()"><br> <br> <br> <h3> Results: </h3> <ng-map zoom="11" center="[{{latitude}}, {{longitude}}]" zoom-to-include-markers="true"> </ng-map>')}]);